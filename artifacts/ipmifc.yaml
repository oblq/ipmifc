ipmi_cmd: ipmitool # for remote control use: `ipmitool -I lanplus -U '<ipmi_user>' -P '<ipmi_password>' -H <remote_ip>`

# These settings may vary...
# It is possible to use arbitrary values here,
# I just reported the ones which are supported by my hardware.
# This is the value passed directly to the IPMI raw command, so also hex values are accepted.
#
# IPMI known fan modes :
# - Standard = 0 or 0x00
# - Full     = 1 or 0x01
# - Optimal  = 2 or 0x02
# - HeavyIO  = 4 or 0x04
#
# IPMIFC custom mode:
# - Custom   = custom
# Custom mode will set native FullMode under the hood,
# it will also enable control with the below controllers.
# Editing the ipmi zones duty-cycle without setting 'custom' (ipmi Full mode behind the scenes) first will non work.
fan_mode: custom

# Number of seconds to sleep between checks.
# Check configuration changes and sensors data every x seconds.
check_interval: 8

# `fan_mode` must be "custom" in order for this to work.
controllers:

  # name is arbitrary, will be printed in logs.
  - name: CPU
    # IPMI sensor entityID to look for.
    # Get the ipmi sensor entityID with: `sudo ipmitool sdr elist full` at the fourth column in result.
    # ... or with: `sudo ipmitool sensor get <sensor_id>` (eg.: sudo ipmitool sensor get 'CPU Temp')
    temp_ipmi_entity: 3.1
    # The minimum change in °C from the last update to actually cause another fan speed change.
    min_temp_change: 2
    # The targets that we want to control by this sensor.
    # Usually cpu zone: 0x00, i/o zone: 0x01.
    targets:
      0x00:
        # Define a map for every target zone with temp (°C) and fans duty-cycle (%).
        0: 20
        36: 24
        42: 32
        54: 50
        60: 72
        66: 86
        72: 100


#  - name: GPU
#    # Direct command to extract NVIDIA GPU temp here replace the `temp_ipmi_entity` var.
#    # Should return a string representing a valid float number,
#    # leading and trailing spaces will be automatically removed.
#    # If both `temp_cmd` and `temp_ipmi_entity` are present `temp_cmd` takes precedence.
#    temp_cmd: nvidia-smi --query-gpu=temperature.gpu --format=csv,noheader
#    min_temp_change: 2
#    targets:
#      0x00:
#        0: 20
#        35: 30
#        50: 50
#        65: 75
#        80: 100


#  - name: PCH
#    temp_ipmi_entity: 7.1
#    min_temp_change: 2
#    # Control multiple target zones with the same sensor...
#    targets:
#      0x00:
#        0: 20
#        54: 30
#        60: 50
#        66: 75
#        72: 100
#      0x01:
#        0: 14
#        54: 30
#        60: 54
#        66: 86
#        72: 100
